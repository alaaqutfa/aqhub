$(function(){var e='<div class=\'w-100 text-center py-3\'><div class="spinner-border" role="status">\n        <span class="visually-hidden">Loading...</span>\n    </div></div>',r="ecommerce-tax-rule-table",t=$(".create-tax-rule-form-modal"),o=t.find(".modal-body"),a=t.find(".modal-title strong"),n=$(".create-tax-form-modal"),s=n.find(".modal-body"),c=n.find(".modal-title strong"),l=function(e){o.html(e.data.html),a.text(e.message||"...")},u=function(e){s.html(e.data.html),c.text(e.message||"...")},i=function(){window.LaravelDataTables&&window.LaravelDataTables[r]?LaravelDataTables[r].draw():window.location.reload()};t.on("show.bs.modal",function(){o.html(e),a.text("...")}),n.on("show.bs.modal",function(){s.html(e),c.text("...")}),$(document).on("click",".btn-create-tax",function(e){e.preventDefault();var r=$(e.currentTarget);n.modal("show"),$.ajax({url:r.data("href"),success:function(e){0==e.error?(u(e),Botble.initResources()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("click",".btn-edit-tax",function(e){e.preventDefault();var r=$(e.currentTarget);n.modal("show"),$.ajax({url:r.prop("href"),success:function(e){0==e.error?(u(e),Botble.initResources()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("submit","#ecommerce-tax-form",function(e){e.preventDefault();var r=$(e.currentTarget);$.ajax({url:r.prop("action"),method:"POST",data:r.serializeArray(),success:function(e){0==e.error?(n.modal("hide"),Botble.showSuccess(e.message),i()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).off("click",".create-tax-rule-item").on("click",".create-tax-rule-item",function(e){e.preventDefault();var r=$(e.currentTarget);t.modal("show");var o=r.find("[data-action=create]").data("href")||r.attr("href");$.ajax({url:o,success:function(e){0==e.error?(l(e),Botble.initResources()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("click","#"+r+" .btn-edit-item",function(e){e.preventDefault();var r=$(e.currentTarget);t.modal("show"),$.ajax({url:r.prop("href"),success:function(e){0==e.error?(l(e),Botble.initResources()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("click",".btn-edit-tax-rule",function(e){e.preventDefault();var r=$(e.currentTarget);t.modal("show"),$.ajax({url:r.prop("href"),success:function(e){0==e.error?(l(e),Botble.initResources()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("click",".btn-delete-tax-rule",function(e){e.preventDefault();var r=$(e.currentTarget).data("url");confirm("Are you sure you want to delete this tax rule?")&&$.ajax({url:r,method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){0==e.error?(Botble.showSuccess(e.message),i()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("click",".btn-set-default-tax",function(e){e.preventDefault();var r=$(e.currentTarget).data("url");$.ajax({url:r,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){0==e.error?(Botble.showSuccess(e.message),i()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("click",".btn-delete-tax",function(e){e.preventDefault();var r=$(e.currentTarget).data("url");confirm("Are you sure you want to delete this tax?")&&$.ajax({url:r,method:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){0==e.error?(Botble.showSuccess(e.message),i()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})}),$(document).on("submit","#ecommerce-tax-rule-form",function(e){e.preventDefault();var r=$(e.currentTarget);$.ajax({url:r.prop("action"),method:"POST",data:r.serializeArray(),success:function(e){0==e.error?(t.modal("hide"),Botble.showSuccess(e.message),i()):Botble.showError(e.message)},error:function(e){Botble.handleError(e)}})})});