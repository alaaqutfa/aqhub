$(function(){var e=$(".license-codes-container");if(e.length){var t=e.data("routes"),o=e.data("confirm-delete"),n=e.data("confirm-bulk-delete");$(".select-all-checkbox").on("change",function(){var e=$(this).prop("checked");$(".license-code-checkbox").prop("checked",e),c()}),$(document).on("change",".license-code-checkbox",function(){var e=$(".license-code-checkbox").length,t=$(".license-code-checkbox:checked").length;$(".select-all-checkbox").prop("checked",e===t),c()}),$(".btn-bulk-delete").on("click",function(){var e=$(".license-code-checkbox:checked").map(function(){return $(this).data("id")}).get();if(0!==e.length&&confirm(n)){var o=$(this);Botble.showButtonLoading(o),$httpClient.make().delete(t.bulkDelete,{ids:e}).then(function(e){var t=e.data;t.error?Botble.showError(t.message):(Botble.showSuccess(t.message),location.reload())}).catch(function(e){Botble.handleError(e)}).finally(function(){Botble.hideButtonLoading(o)})}}),$("#add-license-code-form").on("submit",function(e){e.preventDefault();var o=$(this),n=o.find('button[type="submit"]');Botble.showButtonLoading(n),$httpClient.make().postForm(t.store,new FormData(o[0])).then(function(e){var t=e.data;t.error?Botble.showError(t.message):(Botble.showSuccess(t.message),location.reload())}).catch(function(e){Botble.handleError(e)}).finally(function(){Botble.hideButtonLoading(n)})}),$(document).on("click",".edit-license-code-btn",function(){var e=$(this).data("license-code-id"),t=$(this).data("license-code");$("#edit-license-code-id").val(e),$("#edit-license-code").val(t),$("#edit-license-code-modal").modal("show")}),$("#edit-license-code-form").on("submit",function(e){e.preventDefault();var o=$(this),n=o.find('button[type="submit"]'),c=$("#edit-license-code-id").val();Botble.showButtonLoading(n),$httpClient.make().postForm(t.update.replace("__ID__",c),new FormData(o[0])).then(function(e){var t=e.data;t.error?Botble.showError(t.message):(Botble.showSuccess(t.message),location.reload())}).catch(function(e){Botble.handleError(e)}).finally(function(){Botble.hideButtonLoading(n)})}),$(document).on("click",".delete-license-code-btn",function(){var e=$(this).data("license-code-id");confirm(o)&&$httpClient.make().delete(t.destroy.replace("__ID__",e)).then(function(e){var t=e.data;t.error?Botble.showError(t.message):(Botble.showSuccess(t.message),location.reload())}).catch(function(e){Botble.handleError(e)})}),$("#bulk-generate-form").on("submit",function(e){e.preventDefault();var o=$(this),n=o.find('button[type="submit"]');Botble.showButtonLoading(n),$httpClient.make().postForm(t.bulkGenerate,new FormData(o[0])).then(function(e){var t=e.data;t.error?Botble.showError(t.message):(Botble.showSuccess(t.message),location.reload())}).catch(function(e){Botble.handleError(e)}).finally(function(){Botble.hideButtonLoading(n)})}),$("#license-code-format").on("change",function(){"custom"===$(this).val()?$("#custom-pattern-group").show():$("#custom-pattern-group").hide()})}function c(){var e=$(".license-code-checkbox:checked").length,t=$(".bulk-actions-wrapper");t.find(".selected-count").text(e),e>0?t.show():t.hide()}});